<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AR –ì—Ä–∞: –°–∏–º–≤–æ–ª–∏ –£–∫—Ä–∞—ó–Ω–∏</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>

  <!-- AR.js -->
  <script src="https://cdn.jsdelivr.net/npm/ar.js@3.4.5/aframe/build/aframe-ar.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: Arial, sans-serif;
      touch-action: manipulation; /* –¥–æ–∑–≤–æ–ª—è—î –∫–ª—ñ–∫–∏ */
      background: #000;
    }

    #scanText {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #FFD700;
      font-size: 1.8em;
      font-weight: bold;
      text-shadow: 2px 2px 10px #000;
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 16px;
      text-align: center;
      width: 90%;
      max-width: 400px;
      z-index: 100;
    }

    #smartLessaBtn {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #0055A4;
      color: #FFD700;
      padding: 14px 28px;
      border-radius: 30px;
      font-size: 1.1em;
      font-weight: bold;
      text-decoration: none;
      z-index: 100;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }

    #smartLessaBtn:hover {
      background: #003087;
    }
  </style>
</head>
<body>
  <div id="scanText">–ù–∞–≤–µ–¥–∏ –∫–∞–º–µ—Ä—É –Ω–∞ –º–∞—Ä–∫–µ—Ä Hiro</div>

  <a-scene
    embedded
    arjs="trackingMethod: best; detectionMode: mono_and_matrix; debugUIEnabled: false;"
    renderer="colorFormat: rgba; clearAlpha: 0;"
    vr-mode-ui="enabled: false"
  >
    <a-marker preset="hiro" id="marker">
      <a-entity id="quiz-container" position="0 0 0" rotation="-90 0 0" scale="0.12 0.12 0.12">
        <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ -->
        <a-text
          id="hint-text"
          value=""
          font="https://cdn.aframe.io/fonts/Roboto-msdf.json"
          width="30"
          wrapCount="20"
          align="center"
          color="#FFD700"
          position="0 3.5 0"
          side="double"
        ></a-text>

        <!-- –í–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π -->
        <a-entity id="optionA" class="option" position="-1.5 1 0">
          <a-plane width="3" height="0.8" color="#0055A4" opacity="0.8"></a-plane>
          <a-text
            class="option-label"
            value=""
            font="https://cdn.aframe.io/fonts/Roboto-msdf.json"
            width="20"
            wrapCount="18"
            align="center"
            color="white"
            position="0 -0.3 0.01"
            side="double"
          ></a-text>
        </a-entity>

        <a-entity id="optionB" class="option" position="0 1 0">
          <a-plane width="3" height="0.8" color="#0055A4" opacity="0.8"></a-plane>
          <a-text
            class="option-label"
            value=""
            font="https://cdn.aframe.io/fonts/Roboto-msdf.json"
            width="20"
            wrapCount="18"
            align="center"
            color="white"
            position="0 -0.3 0.01"
            side="double"
          ></a-text>
        </a-entity>

        <a-entity id="optionC" class="option" position="1.5 1 0">
          <a-plane width="3" height="0.8" color="#0055A4" opacity="0.8"></a-plane>
          <a-text
            class="option-label"
            value=""
            font="https://cdn.aframe.io/fonts/Roboto-msdf.json"
            width="20"
            wrapCount="18"
            align="center"
            color="white"
            position="0 -0.3 0.01"
            side="double"
          ></a-text>
        </a-entity>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
        <a-entity id="result-container" visible="false">
          <a-text
            id="result-text"
            value=""
            font="https://cdn.aframe.io/fonts/Roboto-msdf.json"
            width="30"
            wrapCount="22"
            align="center"
            color="#FFD700"
            position="0 2 0"
            side="double"
          ></a-text>
          <a-entity id="restart-btn" position="0 0.5 0">
            <a-plane width="2.5" height="0.8" color="#FFD700" opacity="0.8"></a-plane>
            <a-text
              value="–†–æ–∑–ø–æ—á–∞—Ç–∏ –∑–Ω–æ–≤—É"
              font="https://cdn.aframe.io/fonts/Roboto-msdf.json"
              width="20"
              align="center"
              color="black"
              position="0 -0.3 0.01"
              side="double"
            ></a-text>
          </a-entity>
        </a-entity>
      </a-entity>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>

  <a href="https://youtube.com/playlist?list=PL6UDFwT9TzFxsVdFiEBsQ9yFpcYRPOpfO&si=IyXv1SkdPyvhcW7Z"
     id="smartLessaBtn" target="_blank">@SmartLessa</a>

  <script>
    const marker = document.getElementById('marker');
    const scanText = document.getElementById('scanText');
    const hintText = document.getElementById('hint-text');
    const optionA = document.getElementById('optionA');
    const optionB = document.getElementById('optionB');
    const optionC = document.getElementById('optionC');
    const resultContainer = document.getElementById('result-container');
    const resultText = document.getElementById('result-text');
    const restartBtn = document.getElementById('restart-btn');

    // –°–∏–º–≤–æ–ª–∏ –£–∫—Ä–∞—ó–Ω–∏
    const symbols = [
      { name: "–í–∏—à–∏–≤–∞–Ω–∫–∞", hint: "–¢—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏–π —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –æ–¥—è–≥ —ñ–∑ —è—Å–∫—Ä–∞–≤–∏–º–∏ –≤—ñ–∑–µ—Ä—É–Ω–∫–∞–º–∏." },
      { name: "–ö–∞–ª–∏–Ω–∞", hint: "–†–æ—Å–ª–∏–Ω–∞ –∑ —á–µ—Ä–≤–æ–Ω–∏–º–∏ —è–≥–æ–¥–∞–º–∏, —Å–∏–º–≤–æ–ª –∫—Ä–∞—Å–∏ —Ç–∞ –ª—é–±–æ–≤—ñ." },
      { name: "–ü–∏—Å–∞–Ω–∫–∞", hint: "–†–æ–∑–ø–∏—Å–∞–Ω–µ —è–π—Ü–µ, —è–∫–µ –¥–∞—Ä—É—é—Ç—å –Ω–∞ –í–µ–ª–∏–∫–¥–µ–Ω—å." },
      { name: "–¢—Ä–∏–∑—É–±", hint: "–î–µ—Ä–∂–∞–≤–Ω–∏–π —Å–∏–º–≤–æ–ª –£–∫—Ä–∞—ó–Ω–∏ ‚Äî —Ç—Ä–∏–∑—É–±." },
      { name: "–ë–∞–Ω–¥—É—Ä–∞", hint: "–ú—É–∑–∏—á–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —è–∫–∏–π –≥—Ä–∞—î –∫–æ–±–∑–∞—Ä." },
      { name: "–†—É—à–Ω–∏–∫", hint: "–í–∏—à–∏–≤–∞–Ω–∏–π —à–º–∞—Ç–æ–∫ —Ç–∫–∞–Ω–∏–Ω–∏ –¥–ª—è —Å–≤—è—Ç." },
      { name: "–ö–æ–±–∑–∞—Ä", hint: "–ú—É–∑–∏–∫–∞–Ω—Ç, —è–∫–∏–π —Å–ø—ñ–≤–∞—î –¥—É–º–∏ –ø—ñ–¥ –±–∞–Ω–¥—É—Ä—É." },
      { name: "–ö–æ–∑–∞—Ü—å–∫–∞ —à–∞–±–ª—è", hint: "–ó–±—Ä–æ—è –∫–æ–∑–∞–∫—ñ–≤ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –í—ñ—Ç—á–∏–∑–Ω–∏." }
    ];

    let currentRound = 0;
    let score = 0;
    let currentSymbols = [];
    const totalRounds = 5;

    function shuffle(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function startGame() {
      currentRound = 0;
      score = 0;
      resultContainer.setAttribute('visible', false);
      currentSymbols = shuffle(symbols).slice(0, totalRounds);
      showHint();
    }

    function showHint() {
      if (currentRound < totalRounds) {
        const s = currentSymbols[currentRound];
        hintText.setAttribute('value', s.hint);

        const options = [{ name: s.name, correct: true }];
        const wrongs = shuffle(symbols.filter(sym => sym.name !== s.name)).slice(0, 2);
        wrongs.forEach(w => options.push({ name: w.name, correct: false }));

        const shuffled = shuffle(options);

        [optionA, optionB, optionC].forEach((opt, i) => {
          opt.querySelector('.option-label').setAttribute('value', shuffled[i].name);
          opt.dataset.correct = shuffled[i].correct;
        });
      } else {
        showResult();
      }
    }

    function handleAnswer(option) {
      if (option.dataset.correct === 'true') score++;
      currentRound++;
      setTimeout(showHint, 500);
    }

    function showResult() {
      hintText.setAttribute('value', '');
      [optionA, optionB, optionC].forEach(opt => {
        opt.querySelector('.option-label').setAttribute('value', '');
      });

      const stars = score === 5 ? 'üåüüåüüåü' : score >= 3 ? 'üåüüåü' : 'üåü';
      resultText.setAttribute('value', `–¢–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–≤ –Ω–∞ ${score} –∑ ${totalRounds} –ø–∏—Ç–∞–Ω—å!\n${stars}`);
      resultContainer.setAttribute('visible', true);
    }

    // –û–±—Ä–æ–±–Ω–∏–∫–∏
    [optionA, optionB, optionC].forEach(opt => {
      opt.addEventListener('click', () => handleAnswer(opt));
    });
    restartBtn.addEventListener('click', startGame);

    // –ü–æ–¥—ñ—ó –º–∞—Ä–∫–µ—Ä–∞
    marker.addEventListener('markerFound', () => {
      scanText.style.display = 'none';
      startGame();
    });

    marker.addEventListener('markerLost', () => {
      scanText.style.display = 'block';
    });

    // –§—ñ–∫—Å –≤–∏—Å–æ—Ç–∏
    function setHeight() {
      document.body.style.height = window.innerHeight + 'px';
    }
    window.addEventListener('resize', setHeight);
    setHeight();

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–∞–º–µ—Ä–∏
    navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
      .catch(err => {
        scanText.textContent = '–î–æ–∑–≤–æ–ª—å—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –∫–∞–º–µ—Ä–∏';
        console.error('–ü–æ–º–∏–ª–∫–∞ –∫–∞–º–µ—Ä–∏:', err);
      });
  </script>
</body>
</html>
