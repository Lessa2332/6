<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AR –ì—Ä–∞: –°–∏–º–≤–æ–ª–∏ –£–∫—Ä–∞—ó–Ω–∏</title>

  <!-- A-Frame (latest) -->
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>

  <!-- AR.js for A-Frame (stable version) -->
  <script src="https://cdn.jsdelivr.net/npm/ar.js@3.4.0/aframe/build/aframe-ar.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: 'Arial', sans-serif;
      touch-action: manipulation; /* –¥–æ–∑–≤–æ–ª—è—î –∫–ª—ñ–∫–∏, –∞–ª–µ –æ–±–º–µ–∂—É—î –∂–µ—Å—Ç–∏ */
      background: #000;
    }

    #arScene {
      width: 100%;
      height: 100%;
      position: fixed;
      top: 0;
      left: 0;
    }

    #scanText {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #FFD700;
      font-size: 1.8em;
      font-weight: bold;
      text-shadow: 2px 2px 8px #000;
      z-index: 100;
      text-align: center;
      width: 90%;
      pointer-events: none;
      background: rgba(0, 0, 0, 0.6);
      padding: 20px;
      border-radius: 15px;
    }

    #smartLessaBtn {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #ff0044;
      color: white;
      padding: 14px 24px;
      border-radius: 30px;
      font-size: 1.1em;
      font-weight: bold;
      text-decoration: none;
      z-index: 100;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      text-align: center;
    }

    #smartLessaBtn:hover {
      background: #cc0036;
    }
  </style>
</head>
<body>
  <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è–º -->
  <div id="scanText">–ù–∞–≤–µ–¥–∏ –∫–∞–º–µ—Ä—É –Ω–∞ –º–∞—Ä–∫–µ—Ä Hiro</div>

  <!-- AR –°—Ü–µ–Ω–∞ -->
  <a-scene
    id="arScene"
    embedded
    arjs="trackingMethod: best; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
    renderer="webgl: true; antialias: true; colorFormat: rgba; clearAlpha: 0;"
    vr-mode-ui="enabled: false"
  >
    <a-marker preset="hiro" id="marker">
      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ –≤—ñ–∫–Ω–æ–º –ø–∏—Ç–∞–Ω—å -->
      <a-entity id="quiz-container" position="0 0 0" rotation="-90 0 0" scale="0.05 0.05 0.05">
        <!-- –ü—ñ–¥–∫–∞–∑–∫–∞ -->
        <a-text id="hint-text" value="" position="-1 2 0" width="40" align="center" color="#FFD700"></a-text>

        <!-- –í–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π -->
        <a-entity id="optionA" class="option" position="-1 1 0">
          <a-plane width="2" height="0.5" color="blue" opacity="0.7"></a-plane>
          <a-text class="option-text" value="" width="35" align="left" color="white" position="-0.9 -0.2 0.01"></a-text>
        </a-entity>

        <a-entity id="optionB" class="option" position="-1 0.5 0">
          <a-plane width="2" height="0.5" color="blue" opacity="0.7"></a-plane>
          <a-text class="option-text" value="" width="35" align="left" color="white" position="-0.9 -0.2 0.01"></a-text>
        </a-entity>

        <a-entity id="optionC" class="option" position="-1 0 0">
          <a-plane width="2" height="0.5" color="blue" opacity="0.7"></a-plane>
          <a-text class="option-text" value="" width="35" align="left" color="white" position="-0.9 -0.2 0.01"></a-text>
        </a-entity>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
        <a-entity id="result-container" visible="false">
          <a-text id="result-text" value="" position="-1 1 0" width="40" align="center" color="yellow"></a-text>
          <a-entity id="restart-btn" position="-1 0 0">
            <a-plane width="1.5" height="0.5" color="green" opacity="0.8"></a-plane>
            <a-text value="–†–æ–∑–ø–æ—á–∞—Ç–∏ –∑–Ω–æ–≤—É" width="20" align="center" color="white" position="-0.7 -0.2 0.01"></a-text>
          </a-entity>
        </a-entity>
      </a-entity>
    </a-marker>

    <!-- –ö–∞–º–µ—Ä–∞ –∑ –∫—É—Ä—Å–æ—Ä–æ–º -->
    <a-entity camera></a-entity>
  </a-scene>

  <!-- –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ YouTube -->
  <a href="https://youtube.com/playlist?list=PL6UDFwT9TzFxsVdFiEBsQ9yFpcYRPOpfO&si=IyXv1SkdPyvhcW7Z"
     id="smartLessaBtn" target="_blank">@SmartLessa</a>

  <script>
    // –û—Å–Ω–æ–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
    const marker = document.getElementById('marker');
    const scanText = document.getElementById('scanText');
    const quizContainer = document.getElementById('quiz-container');
    const hintText = document.getElementById('hint-text');
    const optionA = document.getElementById('optionA');
    const optionB = document.getElementById('optionB');
    const optionC = document.getElementById('optionC');
    const resultContainer = document.getElementById('result-container');
    const resultText = document.getElementById('result-text');
    const restartBtn = document.getElementById('restart-btn');

    // –î–∞–Ω—ñ –≥—Ä–∏ ‚Äî —Å–∏–º–≤–æ–ª–∏ –£–∫—Ä–∞—ó–Ω–∏
    const symbols = [
      { name: "–í–∏—à–∏–≤–∞–Ω–∫–∞", hint: "–¶–µ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏–π —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –æ–¥—è–≥ —ñ–∑ —è—Å–∫—Ä–∞–≤–∏–º–∏ –≤—ñ–∑–µ—Ä—É–Ω–∫–∞–º–∏." },
      { name: "–ö–∞–ª–∏–Ω–∞", hint: "–¶—è —Ä–æ—Å–ª–∏–Ω–∞ –∑ —á–µ—Ä–≤–æ–Ω–∏–º–∏ —è–≥–æ–¥–∞–º–∏ —Å–∏–º–≤–æ–ª—ñ–∑—É—î –∫—Ä–∞—Å—É —ñ –ª—é–±–æ–≤." },
      { name: "–ü–∏—Å–∞–Ω–∫–∞", hint: "–¶–µ —Ä–æ–∑–ø–∏—Å–∞–Ω–µ —è–π—Ü–µ, —è–∫–µ –¥–∞—Ä—É—é—Ç—å –Ω–∞ –í–µ–ª–∏–∫–¥–µ–Ω—å." },
      { name: "–¢—Ä–∏–∑—É–±", hint: "–¶–µ –¥–µ—Ä–∂–∞–≤–Ω–∏–π —Å–∏–º–≤–æ–ª –£–∫—Ä–∞—ó–Ω–∏, —Å—Ö–æ–∂–∏–π –Ω–∞ —Ç—Ä–∏–∑—É–±–µ—Ü—å." },
      { name: "–ë–∞–Ω–¥—É—Ä–∞", hint: "–¶–µ–π –º—É–∑–∏—á–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –∫–æ–±–∑–∞—Ä—ñ." },
      { name: "–†—É—à–Ω–∏–∫", hint: "–í–∏—à–∏–≤–∞–Ω–∏–π —à–º–∞—Ç–æ–∫ —Ç–∫–∞–Ω–∏–Ω–∏, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –Ω–∞ —Å–≤—è—Ç–∞—Ö." },
      { name: "–ö–æ–±–∑–∞—Ä", hint: "–¶–µ –º—É–∑–∏–∫–∞–Ω—Ç, —è–∫–∏–π —Å–ø—ñ–≤–∞—î –¥—É–º–∏ –ø—ñ–¥ –∞–∫–æ–º–ø–∞–Ω–µ–º–µ–Ω—Ç –±–∞–Ω–¥—É—Ä–∏." },
      { name: "–ö–æ–∑–∞—Ü—å–∫–∞ —à–∞–±–ª—è", hint: "–ó–±—Ä–æ—è, —è–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∏ –∫–æ–∑–∞–∫–∏ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É." }
    ];

    let currentRound = 0;
    let score = 0;
    let currentSymbols = [];
    const totalRounds = 5;

    // –ü–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è –º–∞—Å–∏–≤—É
    function shuffle(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // –ü–æ—á–∞—Ç–∏ –≥—Ä—É
    function startGame() {
      currentRound = 0;
      score = 0;
      resultContainer.setAttribute('visible', false);
      currentSymbols = shuffle(symbols).slice(0, totalRounds);
      showHint();
    }

    // –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—ñ–¥–∫–∞–∑–∫—É —Ç–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏
    function showHint() {
      if (currentRound < totalRounds) {
        const current = currentSymbols[currentRound];
        hintText.setAttribute('value', current.hint);

        // –°—Ç–≤–æ—Ä—é—î–º–æ –≤–∞—Ä—ñ–∞–Ω—Ç–∏: 1 –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π + 2 –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö
        const options = [{ name: current.name, correct: true }];
        const wrongs = shuffle(symbols.filter(s => s.name !== current.name)).slice(0, 2);
        wrongs.forEach(s => options.push({ name: s.name, correct: false }));

        const shuffledOptions = shuffle(options);

        // –ù–∞–¥–∞—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
        const texts = [optionA, optionB, optionC];
        texts.forEach((opt, i) => {
          const textEl = opt.querySelector('.option-text');
          textEl.setAttribute('value', shuffledOptions[i].name);
          opt.correct = shuffledOptions[i].correct;
        });
      } else {
        showResult();
      }
    }

    // –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
    function handleAnswer(selectedOption) {
      if (selectedOption.correct) score++;
      currentRound++;
      setTimeout(showHint, 500); // –ó–∞—Ç—Ä–∏–º–∫–∞ –¥–ª—è UX
    }

    // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
    function showResult() {
      hintText.setAttribute('value', '');
      [optionA, optionB, optionC].forEach(opt => {
        opt.querySelector('.option-text').setAttribute('value', '');
      });

      let badge = '';
      if (score === 5) badge = '–°—É–ø–µ—Ä –∑–Ω–∞–≤–µ—Ü—å —Å–∏–º–≤–æ–ª—ñ–≤! üåüüåüüåü';
      else if (score >= 3) badge = '–ú–æ–ª–æ–¥–µ—Ü—å, –∑–Ω–∞—î—à —Å–∏–º–≤–æ–ª–∏! üåüüåü';
      else badge = '–¢–∏ –¥—ñ–∑–Ω–∞–≤—Å—è –ø—Ä–æ —Å–∏–º–≤–æ–ª–∏! üåü';

      resultText.setAttribute('value', `–¢–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–≤ –Ω–∞ ${score} –∑ ${totalRounds} –ø–∏—Ç–∞–Ω—å!\n${badge}`);
      resultContainer.setAttribute('visible', true);
    }

    // –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–ª—ñ–∫—ñ–≤
    [optionA, optionB, optionC].forEach(option => {
      option.addEventListener('click', () => handleAnswer(option));
    });

    restartBtn.addEventListener('click', startGame);

    // –ü–æ–¥—ñ—ó –º–∞—Ä–∫–µ—Ä–∞
    marker.addEventListener('markerFound', () => {
      scanText.style.display = 'none';
      startGame();
    });

    marker.addEventListener('markerLost', () => {
      scanText.style.display = 'block';
    });

    // –§—ñ–∫—Å –≤–∏—Å–æ—Ç–∏ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö
    function setBodyHeight() {
      document.body.style.height = window.innerHeight + 'px';
    }
    window.addEventListener('resize', setBodyHeight);
    setBodyHeight();

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–∞–º–µ—Ä–∏ (–¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
    (async () => {
      try {
        await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
        console.log('–ö–∞–º–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞');
      } catch (err) {
        console.error('–ü–æ–º–∏–ª–∫–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–∞–º–µ—Ä–∏:', err);
        scanText.textContent = '–î–æ–∑–≤–æ–ª—å—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –∫–∞–º–µ—Ä–∏';
      }
    })();
  </script>
</body>
</html>
