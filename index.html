<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AR –ì—Ä–∞: –°–∏–º–≤–æ–ª–∏ –£–∫—Ä–∞—ó–Ω–∏</title>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@master/aframe/build/aframe-ar.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      touch-action: none; /* –±–ª–æ–∫—É—î pinch zoom */
      font-family: Arial, sans-serif;
    }
    a-scene {
      width: 100%;
      height: 100%;
      position: fixed;
      top: 0;
      left: 0;
    }
    #scanText {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #FFD700;
      font-size: 2em;
      font-weight: bold;
      text-shadow: 2px 2px 6px #000;
      z-index: 10;
      text-align: center;
      width: 90%;
    }
    #smartLessaBtn {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #ff0044;
      color: white;
      padding: 14px 24px;
      border-radius: 30px;
      font-size: 1.1em;
      font-weight: bold;
      text-decoration: none;
      z-index: 10;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    #smartLessaBtn:hover {
      background: #cc0036;
    }
  </style>
</head>
<body>
  <div id="scanText">–ù–∞–≤–µ–¥–∏ –∫–∞–º–µ—Ä—É –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è Hiro –º–∞—Ä–∫–µ—Ä–∞</div>

  <a-scene embedded id="arScene" arjs="sourceType: webcam; detectionMode: mono; trackingMethod: best; facingBack: true;">
    <a-marker id="marker" preset="hiro">
      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≥—Ä–∏ -->
      <a-entity id="quiz-container" position="0 0 0" rotation="-90 0 0" scale="0.05 0.05 0.05">
        <a-text id="hint-text" value="" position="-1 2 0" width="40" align="center" color="white"></a-text>
        <a-entity id="optionA" class="option" position="-1 1 0">
          <a-plane width="2" height="0.5" material="color: blue; opacity: 0.7"></a-plane>
          <a-text value="" width="35" align="left" color="white" position="-0.9 -0.2 0.01"></a-text>
        </a-entity>
        <a-entity id="optionB" class="option" position="-1 0.5 0">
          <a-plane width="2" height="0.5" material="color: blue; opacity: 0.7"></a-plane>
          <a-text value="" width="35" align="left" color="white" position="-0.9 -0.2 0.01"></a-text>
        </a-entity>
        <a-entity id="optionC" class="option" position="-1 0 0">
          <a-plane width="2" height="0.5" material="color: blue; opacity: 0.7"></a-plane>
          <a-text value="" width="35" align="left" color="white" position="-0.9 -0.2 0.01"></a-text>
        </a-entity>
        <a-entity id="result-container" visible="false">
          <a-text id="result-text" value="" position="-1 1 0" width="40" align="center" color="yellow"></a-text>
          <a-entity id="restart-btn" class="clickable" position="-1 0 0">
            <a-plane width="1.5" height="0.5" material="color: green; opacity: 0.7"></a-plane>
            <a-text value="–†–æ–∑–ø–æ—á–∞—Ç–∏ –∑–Ω–æ–≤—É" width="20" align="center" color="white" position="-0.7 -0.2 0.01"></a-text>
          </a-entity>
        </a-entity>
      </a-entity>
    </a-marker>
    <a-entity camera>
      <a-cursor></a-cursor>
    </a-entity>
  </a-scene>

  <a href="https://youtube.com/playlist?list=PL6UDFwT9TzFxsVdFiEBsQ9yFpcYRPOpfO&si=IyXv1SkdPyvhcW7Z"
     id="smartLessaBtn" target="_blank">@SmartLessa</a>

  <script>
    const marker = document.getElementById('marker');
    const scanText = document.getElementById('scanText');
    const quizContainer = document.getElementById('quiz-container');
    const hintText = document.getElementById('hint-text');
    const optionA = document.getElementById('optionA');
    const optionB = document.getElementById('optionB');
    const optionC = document.getElementById('optionC');
    const resultContainer = document.getElementById('result-container');
    const resultText = document.getElementById('result-text');
    const restartBtn = document.getElementById('restart-btn');

    // –°–∏–º–≤–æ–ª–∏ –£–∫—Ä–∞—ó–Ω–∏ —Ç–∞ –ø—ñ–¥–∫–∞–∑–∫–∏
    const symbols = [
      {
        name: "–í–∏—à–∏–≤–∞–Ω–∫–∞",
        hint: "–¶–µ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏–π —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –æ–¥—è–≥ —ñ–∑ —è—Å–∫—Ä–∞–≤–∏–º–∏ –≤—ñ–∑–µ—Ä—É–Ω–∫–∞–º–∏."
      },
      {
        name: "–ö–∞–ª–∏–Ω–∞",
        hint: "–¶—è —Ä–æ—Å–ª–∏–Ω–∞ –∑ —á–µ—Ä–≤–æ–Ω–∏–º–∏ —è–≥–æ–¥–∞–º–∏ —Å–∏–º–≤–æ–ª—ñ–∑—É—î –∫—Ä–∞—Å—É —ñ –ª—é–±–æ–≤."
      },
      {
        name: "–ü–∏—Å–∞–Ω–∫–∞",
        hint: "–¶–µ —Ä–æ–∑–ø–∏—Å–∞–Ω–µ —è–π—Ü–µ, —è–∫–µ –¥–∞—Ä—É—é—Ç—å –Ω–∞ –í–µ–ª–∏–∫–¥–µ–Ω—å."
      },
      {
        name: "–¢—Ä–∏–∑—É–±",
        hint: "–¶–µ –¥–µ—Ä–∂–∞–≤–Ω–∏–π —Å–∏–º–≤–æ–ª –£–∫—Ä–∞—ó–Ω–∏, —Å—Ö–æ–∂–∏–π –Ω–∞ —Ç—Ä–∏–∑—É–±–µ—Ü—å."
      },
      {
        name: "–ë–∞–Ω–¥—É—Ä–∞",
        hint: "–¶–µ–π –º—É–∑–∏—á–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –∫–æ–±–∑–∞—Ä—ñ."
      },
      {
        name: "–†—É—à–Ω–∏–∫",
        hint: "–í–∏—à–∏–≤–∞–Ω–∏–π —à–º–∞—Ç–æ–∫ —Ç–∫–∞–Ω–∏–Ω–∏, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –Ω–∞ —Å–≤—è—Ç–∞—Ö."
      },
      {
        name: "–ö–æ–±–∑–∞—Ä",
        hint: "–¶–µ –º—É–∑–∏–∫–∞–Ω—Ç, —è–∫–∏–π —Å–ø—ñ–≤–∞—î –¥—É–º–∏ –ø—ñ–¥ –∞–∫–æ–º–ø–∞–Ω–µ–º–µ–Ω—Ç –±–∞–Ω–¥—É—Ä–∏."
      },
      {
        name: "–ö–æ–∑–∞—Ü—å–∫–∞ —à–∞–±–ª—è",
        hint: "–ó–±—Ä–æ—è, —è–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∏ –∫–æ–∑–∞–∫–∏ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É."
      }
    ];

    let currentRound = 0;
    let score = 0;
    let currentSymbols = [];
    const totalRounds = 5;

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è –º–∞—Å–∏–≤—É
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function startGame() {
      currentRound = 0;
      score = 0;
      resultContainer.setAttribute('visible', false);
      // –í–∏–±–∏—Ä–∞—î–º–æ 5 –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö —Å–∏–º–≤–æ–ª—ñ–≤ –¥–ª—è –≥—Ä–∏
      currentSymbols = shuffle([...symbols]).slice(0, totalRounds);
      showHint();
    }

    function showHint() {
      if (currentRound < totalRounds) {
        const s = currentSymbols[currentRound];
        hintText.setAttribute('value', s.hint);
        // –í–∏–±–∏—Ä–∞—î–º–æ 3 –≤–∏–ø–∞–¥–∫–æ–≤—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π, –≤–∫–ª—é—á–∞—é—á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É
        const options = [{ name: s.name, correct: true }];
        const otherSymbols = symbols.filter(sym => sym.name !== s.name);
        const wrongOptions = shuffle([...otherSymbols]).slice(0, 2).map(sym => ({ name: sym.name, correct: false }));
        const allOptions = shuffle([...options, ...wrongOptions]);
        optionA.querySelector('a-text').setAttribute('value', allOptions[0].name);
        optionB.querySelector('a-text').setAttribute('value', allOptions[1].name);
        optionC.querySelector('a-text').setAttribute('value', allOptions[2].name);
        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
        optionA.correct = allOptions[0].correct;
        optionB.correct = allOptions[1].correct;
        optionC.correct = allOptions[2].correct;
      } else {
        showResult();
      }
    }

    function handleAnswer(selectedOption) {
      if (selectedOption.correct) {
        score++;
      }
      currentRound++;
      showHint();
    }

    function showResult() {
      hintText.setAttribute('value', '');
      optionA.querySelector('a-text').setAttribute('value', '');
      optionB.querySelector('a-text').setAttribute('value', '');
      optionC.querySelector('a-text').setAttribute('value', '');
      let badge = '';
      if (score === 5) badge = '–°—É–ø–µ—Ä –∑–Ω–∞–≤–µ—Ü—å —Å–∏–º–≤–æ–ª—ñ–≤! üåüüåüüåü';
      else if (score >= 3) badge = '–ú–æ–ª–æ–¥–µ—Ü—å, –∑–Ω–∞—î—à —Å–∏–º–≤–æ–ª–∏! üåüüåü';
      else badge = '–¢–∏ –¥—ñ–∑–Ω–∞–≤—Å—è –ø—Ä–æ —Å–∏–º–≤–æ–ª–∏! üåü';
      resultText.setAttribute('value', `–¢–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–≤ –Ω–∞ ${score} –∑ ${totalRounds} –ø–∏—Ç–∞–Ω—å!\n${badge}`);
      resultContainer.setAttribute('visible', true);
    }

    // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –∫–ª—ñ–∫—ñ–≤
    optionA.addEventListener('click', () => handleAnswer(optionA));
    optionB.addEventListener('click', () => handleAnswer(optionB));
    optionC.addEventListener('click', () => handleAnswer(optionC));
    restartBtn.addEventListener('click', startGame);

    // –ü–æ–¥—ñ—ó –º–∞—Ä–∫–µ—Ä–∞
    marker.addEventListener('markerFound', () => {
      scanText.style.display = 'none';
      startGame();
    });

    marker.addEventListener('markerLost', () => {
      scanText.style.display = 'block';
    });

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–∞–º–µ—Ä–∏
    navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
      .then(stream => {
        console.log('–î–æ—Å—Ç—É–ø –¥–æ –∑–∞–¥–Ω—å–æ—ó –∫–∞–º–µ—Ä–∏ –Ω–∞–¥–∞–Ω–æ');
      })
      .catch(err => {
        scanText.textContent = '–î–æ–∑–≤–æ–ª—å—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –∑–∞–¥–Ω—å–æ—ó –∫–∞–º–µ—Ä–∏ –¥–ª—è AR';
        console.error('–ü–æ–º–∏–ª–∫–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–∞–º–µ—Ä–∏:', err);
      });

    // –§—ñ–∫—Å –≤–∏—Å–æ—Ç–∏ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –±—Ä–∞—É–∑–µ—Ä—ñ–≤
    function fixHeight() {
      document.body.style.height = window.innerHeight + 'px';
    }
    window.addEventListener('resize', fixHeight);
    fixHeight();
  </script>
</body>
</html>